<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MGP Car Dealership - Premium Auto</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="scanlines"></div>
    
    <header>
        <div class="container">
            <div class="logo">
                <h1>MGP<span>CAR DEALERSHIP</span></h1>
            </div>
            <nav>
                <a href="index.html" class="nav-btn active">
                    <span>–ö–∞—Ç–∞–ª–æ–≥</span>
                    <div class="shimmer">
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                </a>
                <a href="about.html" class="nav-btn">
                    <span>–ü—Ä–æ –Ω–∞—Å</span>
                    <div class="shimmer">
                        <div></div>
                        <div></div>
                        <div></div>
                    </div>
                </a>
            </nav>
        </div>
    </header>

    <section class="hero">
        <div class="hero-content">
            <h2>–ï–ö–°–ö–õ–Æ–ó–ò–í–ù–Ü –ê–í–¢–û–ú–û–ë–Ü–õ–Ü</h2>
            <p>–ù–∞–π–∫—Ä–∞—â—ñ —Å—É–ø–µ—Ä–∫–∞—Ä–∏ –¥–ª—è —Ç–∏—Ö, —Ö—Ç–æ –∑–Ω–∞—î —Ü—ñ–Ω—É —à–≤–∏–¥–∫–æ—Å—Ç—ñ</p>
        </div>
    </section>

    <section class="filters">
        <div class="container">
            <!-- –§—ñ–ª—å—Ç—Ä–∏ –±—É–¥—É—Ç—å –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
        </div>
    </section>

    <section class="catalog">
        <div class="container">
            <div class="car-grid" id="carGrid">
                <!-- –ö–∞—Ä—Ç–∫–∏ –∞–≤—Ç–æ–º–æ–±—ñ–ª—ñ–≤ –±—É–¥—É—Ç—å –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –¥–∏–Ω–∞–º—ñ—á–Ω–æ -->
            </div>
        </div>
    </section>

    <footer>
        <div class="container">
            <p>&copy; 1925 MGP Car Dealership. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω–æ.</p>
            <p class="footer-note">–¶—ñ–Ω–∏ –≤–∫–∞–∑–∞–Ω—ñ –≤ –∞–ª–º–∞–∑–∞—Ö üíé —ñ –º–æ–∂—É—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—è</p>
        </div>
    </footer>

    <!-- Basketball Game Container -->
    <div id="basketball-game" class="desktop-only">
        <div class="hoop-container">
            <img src="https://static.vecteezy.com/system/resources/thumbnails/055/239/852/small/basketball-hoop-outdoor-court-on-transparent-background-png.png" alt="Hoop" class="hoop-img">
        </div>
        <div class="ball" id="basketball">
            <img src="assets/images/ball.png" alt="Ball" class="ball-img">
        </div>
        <div class="score-board">Score: <span id="score">0</span></div>
        <button id="close-game-btn" style="position: absolute; top: 20px; left: 20px; pointer-events: auto; background: rgba(0,0,0,0.8); color: #fff; border: 1px solid #fff; padding: 10px 20px; cursor: pointer; font-family: 'Orbitron', sans-serif;">EXIT GAME</button>
    </div>

    <div class="container" style="text-align: center; padding-bottom: 40px;">
        <button id="start-game-btn" class="play-game-btn desktop-only">–ó—ñ–≥—Ä–∞—Ç–∏ –≤ –ë–∞—Å–∫–µ—Ç–±–æ–ª</button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const ball = document.getElementById('basketball');
            const ballImg = ball ? ball.querySelector('img') : null;
            const gameContainer = document.getElementById('basketball-game');
            const scoreElement = document.getElementById('score');
            const startBtn = document.getElementById('start-game-btn');
            const closeBtn = document.getElementById('close-game-btn');

            if (!ball || !gameContainer) return;

            let gameActive = false;
            let score = 0;
            let isDragging = false;
            let ballX = window.innerWidth / 2 - 40; // Center of screen
            let ballY = window.innerHeight - 100; // Bottom area
            let velocityX = 0;
            let velocityY = 0;
            let rotation = 0;
            let angularVelocity = 0;
            
            // Casual physics constants
            let gravity = 0.25; // Even lower gravity for slower feel
            let bounce = 0.7; // Slightly less bounce
            let friction = 0.995; // Less friction
            let throwPower = 15; // Slower throw

            let lastMouseX, lastMouseY;
            let lastTime;
            let wasAboveRim = false;

            // Hoop coordinates based on new image
            // Container is full screen.
            // Hoop container is absolute right: 0, top: 150px, width: 200px.
            // So hoop center X is roughly window.innerWidth - 100 (center of 200px container).
            // Y is 150 + 100 = 250.
            let hoopX = window.innerWidth - 100;
            let hoopY = 250;
            const rimRadius = 45; // Bigger rim

            // Debug Hitboxes
            const debugMode = false;
            const debugElements = [];

            function createDebugElement(x, y, width, height, color = 'red', borderRadius = '0') {
                if (!debugMode) return;
                const el = document.createElement('div');
                el.style.position = 'absolute';
                el.style.left = `${x}px`;
                el.style.top = `${y}px`;
                el.style.width = `${width}px`;
                el.style.height = `${height}px`;
                el.style.backgroundColor = color;
                el.style.opacity = '0.5';
                el.style.pointerEvents = 'none';
                el.style.zIndex = '9998';
                el.style.borderRadius = borderRadius;
                gameContainer.appendChild(el);
                debugElements.push(el);
                return el;
            }

            function updateDebugElements() {
                if (!debugMode) return;
                // Clear old elements
                debugElements.forEach(el => el.remove());
                debugElements.length = 0;

                // Rim Points
                const rimLeftX = hoopX - rimRadius;
                const rimRightX = hoopX + rimRadius;
                const rimY = hoopY;

                createDebugElement(rimLeftX - 5, rimY - 5, 10, 10, 'blue', '50%');
                createDebugElement(rimRightX - 5, rimY - 5, 10, 10, 'blue', '50%');
                
                // Hoop Center
                createDebugElement(hoopX - 2, hoopY - 2, 4, 4, 'green', '50%');

                // Ball Hitbox
                createDebugElement(ballX, ballY, 80, 80, 'rgba(255, 0, 0, 0.2)', '50%');
            }

            window.addEventListener('resize', () => {
                hoopX = window.innerWidth - 100;
                if (!isDragging && !gameActive) {
                    ballX = window.innerWidth / 2 - 40;
                    ballY = window.innerHeight - 100;
                    updateBallPosition();
                }
            });

            function updateBallPosition() {
                ball.style.left = `${ballX}px`;
                ball.style.top = `${ballY}px`;
                if (ballImg) {
                    ballImg.style.transform = `rotate(${rotation}deg)`;
                }
                updateDebugElements();
            }

            // Game Control
            if (startBtn) {
                startBtn.addEventListener('click', () => {
                    gameContainer.classList.add('active');
                    document.body.classList.add('game-mode');
                    gameActive = true;
                    // Reset ball
                    ballX = window.innerWidth / 2 - 40;
                    ballY = window.innerHeight - 100;
                    velocityX = 0;
                    velocityY = 0;
                    angularVelocity = 0;
                    updateBallPosition();
                    gameLoop();
                    // Ensure UI buttons use the custom cursor while game is active
                    if (startBtn) startBtn.style.cursor = customCursor;
                    if (closeBtn) closeBtn.style.cursor = customCursor;
                });
            }

            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    gameContainer.classList.remove('active');
                    document.body.classList.remove('game-mode');
                    gameActive = false;
                    // Reset cursors when closing the game
                    if (startBtn) startBtn.style.cursor = '';
                    if (closeBtn) closeBtn.style.cursor = '';
                    document.body.style.cursor = '';
                });
            }

            const customCursor = "url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 32 32\"><text y=\"28\" font-size=\"28\">üñï</text></svg>') 16 16, auto";

            ball.addEventListener('mousedown', (e) => {
                if (!gameActive) return;
                isDragging = true;
                ball.style.cursor = customCursor;
                document.body.style.cursor = customCursor; // Force cursor on body
                if (startBtn) startBtn.style.cursor = customCursor;
                if (closeBtn) closeBtn.style.cursor = customCursor;
                velocityX = 0;
                velocityY = 0;
                angularVelocity = 0;
                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                lastTime = Date.now();
                wasAboveRim = false;
            });

            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;

                // No container offset needed for full screen fixed container
                ballX = e.clientX - 40; // Center ball (80px width)
                ballY = e.clientY - 40;

                const now = Date.now();
                const dt = now - lastTime;
                
                if (dt > 0) {
                    // Calculate velocity
                    const newVx = (e.clientX - lastMouseX) / dt * throwPower;
                    const newVy = (e.clientY - lastMouseY) / dt * throwPower;
                    
                    // Smooth velocity
                    velocityX = newVx;
                    velocityY = newVy;
                }

                lastMouseX = e.clientX;
                lastMouseY = e.clientY;
                lastTime = now;

                updateBallPosition();
            });

            document.addEventListener('mouseup', () => {
                if (!isDragging) return;
                isDragging = false;
                ball.style.cursor = ''; // Revert to CSS
                document.body.style.cursor = ''; // Reset cursor on body
                if (startBtn) startBtn.style.cursor = '';
                if (closeBtn) closeBtn.style.cursor = '';
                
                // Add spin based on horizontal velocity
                angularVelocity = velocityX * 2;
            });

            function checkCollision() {
                const ballSize = 80;
                const ballRadius = ballSize / 2;
                const floorY = window.innerHeight - ballSize;
                const leftWall = 0;
                const rightWall = window.innerWidth - ballSize;

                // Floor
                if (ballY > floorY) {
                    ballY = floorY;
                    velocityY *= -bounce;
                    velocityX *= friction;
                    angularVelocity *= friction;
                    
                    // Stop if slow
                    if (Math.abs(velocityY) < 1 && Math.abs(velocityX) < 1) {
                        velocityY = 0;
                        velocityX = 0;
                        angularVelocity = 0;
                    }
                }

                // Walls
                if (ballX < leftWall) {
                    ballX = leftWall;
                    velocityX *= -bounce;
                    angularVelocity *= -0.5; // Spin reversal/loss on wall hit
                }
                if (ballX > rightWall) {
                    ballX = rightWall;
                    velocityX *= -bounce;
                    angularVelocity *= -0.5;
                }

                // Ceiling
                if (ballY < 0) {
                    ballY = 0;
                    velocityY *= -bounce;
                }

                // Rim collision (simplified)
                // Rim is at hoopX, hoopY.
                // We check collision with "rim points" to simulate the ring.
                // Left rim point: hoopX - rimRadius, hoopY
                // Right rim point: hoopX + rimRadius, hoopY
                
                const rimLeftX = hoopX - rimRadius - 20; // Adjust for ball center vs top-left coord
                const rimRightX = hoopX + rimRadius - 20;
                const rimY = hoopY - 20; // Adjust for ball center

                [rimLeftX, rimRightX].forEach(rimPointX => {
                    // Distance from ball center to rim point
                    const ballCenterX = ballX + ballRadius;
                    const ballCenterY = ballY + ballRadius;
                    
                    const dx = ballCenterX - rimPointX;
                    const dy = ballCenterY - rimY;
                    const dist = Math.sqrt(dx*dx + dy*dy);
                    
                    // Collision radius = ball radius + rim thickness (approx 5)
                    if (dist < ballRadius + 5) {
                        // Bounce
                        const angle = Math.atan2(dy, dx);
                        const speed = Math.sqrt(velocityX*velocityX + velocityY*velocityY);
                        
                        // Reflect velocity vector
                        // Simplified bounce: push away
                        const pushForce = 0.5;
                        velocityX += Math.cos(angle) * pushForce * speed + Math.cos(angle) * 2;
                        velocityY += Math.sin(angle) * pushForce * speed + Math.sin(angle) * 2;
                        
                        // Push out of collision
                        const overlap = (ballRadius + 5) - dist;
                        ballX += Math.cos(angle) * overlap;
                        ballY += Math.sin(angle) * overlap;
                        
                        // Add spin on rim hit
                        angularVelocity += (dx > 0 ? -5 : 5);
                    }
                });
            }

            function gameLoop() {
                if (!gameActive) return; // Stop loop if game closed

                if (!isDragging) {
                    velocityY += gravity;
                    ballX += velocityX;
                    ballY += velocityY;
                    rotation += angularVelocity;

                    // Air resistance
                    velocityX *= 0.998;
                    velocityY *= 0.998;
                    angularVelocity *= 0.99;

                    checkCollision();

                    // Scoring
                    // Ball center
                    const ballCenterX = ballX + 40;
                    const ballCenterY = ballY + 40;

                    // Check if ball passes through hoop center
                    // Must be within X range and pass Y from top to bottom
                    if (Math.abs(ballCenterX - hoopX) < rimRadius) {
                        if (ballCenterY < hoopY && velocityY > 0) {
                            wasAboveRim = true;
                        } else if (ballCenterY > hoopY && wasAboveRim && velocityY > 0) {
                            // Scored!
                            score++;
                            scoreElement.textContent = score;
                            scoreElement.style.color = '#f4c430'; // Primary color
                            scoreElement.style.transform = 'scale(1.5)';
                            setTimeout(() => {
                                scoreElement.style.color = '';
                                scoreElement.style.transform = 'scale(1)';
                            }, 500);
                            wasAboveRim = false;
                            
                            // Slow down slightly on swish
                            velocityY *= 0.8;
                        }
                    } else if (ballCenterY > hoopY + 50) {
                        wasAboveRim = false;
                    }

                    updateBallPosition();
                }
                requestAnimationFrame(gameLoop);
            }
        });
    </script>
    <script>
        // –î–∞–Ω—ñ –ø—Ä–æ –∞–≤—Ç–æ–º–æ–±—ñ–ª—ñ
        const carsData = [
            {
                id: 1,
                brand: 'KABRIK',
                model: 'KABRIK LUXURY',
                category: '–ö–∞–±—Ä—ñ–æ–ª–µ—Ç–∏',
                price: 160,
                oldPrice: null,
                dateAdded: '2025-12-22',
                colors: [
                    { name: '–ë—É–¥—å-—è–∫–∏–π –∫–æ–ª—ñ—Ä', value: 'rainbow', tooltip: '–î–æ—Å—Ç—É–ø–Ω—ñ –≤—Å—ñ –∫–æ–ª—å–æ—Ä–∏' }
                ],
                images: [
                    'assets/images/kabrik1.png',
                    'assets/images/kabrik2.png'
                ],
                gradient: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
            },
            {
                id: 2,
                brand: 'STOSOBIKE',
                model: 'STOSOBIKE SPORT',
                category: '–ú–æ—Ç–æ—Ü–∏–∫–ª–∏',
                price: 192,
                oldPrice: null,
                dateAdded: '2025-12-22',
                colors: [
                    { name: '–ß–µ—Ä–≤–æ–Ω–∏–π', value: '#ff0000', tooltip: '–ß–µ—Ä–≤–æ–Ω–∏–π' }
                ],
                images: [
                    'assets/images/stosobike1.png',
                    'assets/images/stosobike2.png'
                ],
                gradient: 'linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%)'
            },
            {
                id: 3,
                brand: 'GRUB',
                model: 'GRUB SEDAN',
                category: '–°–µ–¥–∞–Ω–∏',
                price: 96,
                oldPrice: null,
                dateAdded: '2025-12-22',
                colors: [
                    { name: '–ê–Ω–¥–µ–∑–∏—Ç', value: '#5f6e72', tooltip: '–ê–Ω–¥–µ–∑–∏—Ç' },
                    { name: '–õ–∞—Ç—É–Ω—å', value: '#b5a642', tooltip: '–õ–∞—Ç—É–Ω—å' }
                ],
                images: [
                    'assets/images/grub1.png',
                    'assets/images/grub2.png',
                    'assets/images/grub3.png'
                ],
                gradient: 'linear-gradient(135deg, #2c3e50 0%, #bdc3c7 100%)'
            },
            {
                id: 4,
                brand: 'MINI',
                model: 'MINI CUPER',
                category: '–ö–∞–±—Ä—ñ–æ–ª–µ—Ç–∏',
                price: 128,
                oldPrice: null,
                dateAdded: '2025-12-22',
                colors: [
                    { name: '–ë—É–¥—å-—è–∫–∏–π –∫–æ–ª—ñ—Ä', value: 'rainbow', tooltip: '–î–æ—Å—Ç—É–ø–Ω—ñ –≤—Å—ñ –∫–æ–ª—å–æ—Ä–∏' }
                ],
                images: [
                    'assets/images/minicuper.png'
                ],
                gradient: 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)'
            },
            {
                id: 5,
                brand: 'LOUNGE',
                model: 'LOUNGE CABRIO',
                category: '–ö–∞–±—Ä—ñ–æ–ª–µ—Ç–∏',
                price: 192,
                oldPrice: null,
                dateAdded: '2025-12-22',
                colors: [
                    { name: '–ß–æ—Ä–Ω–∏–π', value: '#000000', tooltip: '–ß–æ—Ä–Ω–∏–π' },
                    { name: '–ì–æ–ª—É–±–∏–π', value: '#00BFFF', tooltip: '–ì–æ–ª—É–±–∏–π' }
                ],
                images: [
                    'assets/images/lounge1.png',
                    'assets/images/lounge2.png'
                ],
                gradient: 'linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%)'
            },
            {
                id: 6,
                brand: 'TRINDULET',
                model: 'TRINDULET CLASSIC',
                category: '–°–µ–¥–∞–Ω–∏',
                price: 35,
                oldPrice: null,
                dateAdded: '2025-12-22',
                colors: [
                    { name: '–ê–Ω–¥–µ–∑–∏—Ç', value: '#5f6e72', tooltip: '–ê–Ω–¥–µ–∑–∏—Ç' },
                    { name: '–õ–∞—Ç—É–Ω—å', value: '#b5a642', tooltip: '–õ–∞—Ç—É–Ω—å' }
                ],
                images: [
                    'assets/images/trindulet1.png',
                    'assets/images/trindulet2.png'
                ],
                gradient: 'linear-gradient(135deg, #8e9eab 0%, #eef2f3 100%)'
            },
            {
                id: 7,
                brand: 'RENZHROWER',
                model: 'RENZHROWER ELITE',
                category: '–°–µ–¥–∞–Ω–∏',
                price: 128,
                oldPrice: null,
                dateAdded: '2025-12-22',
                colors: [
                    { name: '–ë—É–¥—å-—è–∫–∏–π –∫–æ–ª—ñ—Ä', value: 'rainbow', tooltip: '–î–æ—Å—Ç—É–ø–Ω—ñ –≤—Å—ñ –∫–æ–ª—å–æ—Ä–∏' }
                ],
                images: [
                    'assets/images/renzhrower1.png',
                    'assets/images/renzhrower2.png'
                ],
                gradient: 'linear-gradient(135deg, #000000 0%, #434343 100%)'
            },
            {
                id: 8,
                brand: 'CADILAC',
                model: 'CADILAC V16',
                category: '–°–µ–¥–∞–Ω–∏',
                price: 160,
                oldPrice: null,
                dateAdded: '2025-12-22',
                colors: [
                    { name: '–°—ñ—Ä–∏–π —ñ —á–µ—Ä–≤–æ–Ω–∏–π', value: 'linear-gradient(to right, gray, red)', tooltip: '–°—ñ—Ä–∏–π —ñ —á–µ—Ä–≤–æ–Ω–∏–π' },
                    { name: '–°–∏–Ω—ñ–π —ñ –∂–æ–≤—Ç–∏–π', value: 'linear-gradient(to right, blue, yellow)', tooltip: '–°–∏–Ω—ñ–π —ñ –∂–æ–≤—Ç–∏–π' }
                ],
                images: [
                    'assets/images/cadilac1.png',
                    'assets/images/cadilac2.png'
                ],
                gradient: 'linear-gradient(135deg, #833ab4 0%, #fd1d1d 50%, #fcb045 100%)'
            },
            {
                id: 9,
                brand: 'LANCIA',
                model: 'LANCIA LAMBDA',
                category: '–ö–∞–±—Ä—ñ–æ–ª–µ—Ç–∏',
                price: 224,
                oldPrice: null,
                dateAdded: '2025-12-22',
                colors: [
                    { name: '–ë—É–¥—å-—è–∫–∏–π –∫–æ–ª—ñ—Ä', value: 'rainbow', tooltip: '–î–æ—Å—Ç—É–ø–Ω—ñ –≤—Å—ñ –∫–æ–ª—å–æ—Ä–∏' }
                ],
                images: [
                    'assets/images/lancia1.png',
                    'assets/images/lancia2.png'
                ],
                gradient: 'linear-gradient(135deg, #13547a 0%, #80d0c7 100%)'
            },
            {
                id: 10,
                brand: 'LIMUSIN',
                model: 'LIMUSIN LUX',
                category: '–õ—ñ–º—É–∑–∏–Ω–∏',
                price: 5760,
                oldPrice: null,
                dateAdded: '2025-12-22',
                colors: [
                    { name: '–ë—É–¥—å-—è–∫–∏–π –∫–æ–ª—ñ—Ä', value: 'rainbow', tooltip: '–î–æ—Å—Ç—É–ø–Ω—ñ –≤—Å—ñ –∫–æ–ª—å–æ—Ä–∏' }
                ],
                images: [
                    'assets/images/limusin1.png',
                    'assets/images/limusin2.png'
                ],
                gradient: 'linear-gradient(135deg, #232526 0%, #414345 100%)'
            }
        ];

        // –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
        const categories = ['–í—Å—ñ', '–°–µ–¥–∞–Ω–∏', '–ú–æ—Ç–æ—Ü–∏–∫–ª–∏', '–ö–∞–±—Ä—ñ–æ–ª–µ—Ç–∏', '–õ—ñ–º—É–∑–∏–Ω–∏'];

        // –ü–æ—Ç–æ—á–Ω–∏–π –∞–∫—Ç–∏–≤–Ω–∏–π —Ñ—ñ–ª—å—Ç—Ä
        let activeFilter = '–í—Å—ñ';

        // –§—É–Ω–∫—Ü—ñ—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —á–∏ –∞–≤—Ç–æ–º–æ–±—ñ–ª—å –Ω–æ–≤–∏–π (–º–µ–Ω—à–µ —Ç–∏–∂–Ω—è)
        function isNewCar(dateAdded) {
            const addedDate = new Date(dateAdded);
            const today = new Date();
            const diffTime = Math.abs(today - addedDate);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays <= 7;
        }

        // –§—É–Ω–∫—Ü—ñ—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —á–∏ —î –∑–Ω–∏–∂–∫–∞
        function hasDiscount(car) {
            return car.oldPrice && car.oldPrice > car.price;
        }

        // –§—É–Ω–∫—Ü—ñ—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –≤—ñ–¥—Å–æ—Ç–∫–∞ –∑–Ω–∏–∂–∫–∏
        function getDiscountPercent(car) {
            if (!hasDiscount(car)) return 0;
            return Math.round(((car.oldPrice - car.price) / car.oldPrice) * 100);
        }

        // –§—É–Ω–∫—Ü—ñ—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –±–µ–π–¥–∂–∞
        function getCarBadge(car) {
            // –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 1: –ó–Ω–∏–∂–∫–∞ -> HOT
            if (hasDiscount(car)) {
                return 'HOT';
            }
            // –ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç 2: –ù–æ–≤–∏–π –∞–≤—Ç–æ–º–æ–±—ñ–ª—å -> NEW
            if (isNewCar(car.dateAdded)) {
                return 'NEW';
            }
            return null;
        }

        // –§—É–Ω–∫—Ü—ñ—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–∞—Ä—Ç–∫–∏ –∞–≤—Ç–æ–º–æ–±—ñ–ª—è
        function createCarCard(car) {
            const badge = getCarBadge(car);
            const badgeHTML = badge ? `<div class="car-badge ${badge === 'HOT' ? 'hot' : ''}">${badge}</div>` : '';
            const discount = hasDiscount(car);
            const discountPercent = getDiscountPercent(car);
            
            // –í–∏–∑–Ω–∞—á–∞—î–º–æ —á–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è —á–∏ –≥—Ä–∞–¥—ñ—î–Ω—Ç
            let imageHTML;
            if (car.images && car.images.length > 0) {
                // –°–ª–∞–π–¥–µ—Ä –∑–æ–±—Ä–∞–∂–µ–Ω—å
                const imagesHTML = car.images.map((img, index) => 
                    `<div class="slider-image ${index === 0 ? 'active' : ''}" style="background-image: url('${img}');"></div>`
                ).join('');
                
                const dotsHTML = car.images.length > 1 ? `
                    <div class="slider-dots">
                        ${car.images.map((_, index) => 
                            `<span class="dot ${index === 0 ? 'active' : ''}" data-car="${car.id}" data-index="${index}"></span>`
                        ).join('')}
                    </div>
                ` : '';
                
                // –î–æ–¥–∞—î–º–æ data-–∞—Ç—Ä–∏–±—É—Ç –∑ –≥—Ä–∞–¥—ñ—î–Ω—Ç–æ–º
                imageHTML = `
                    <div class="car-slider" data-car-id="${car.id}" ${car.gradient ? `data-gradient="${car.gradient}"` : ''}>
                        ${imagesHTML}
                        ${dotsHTML}
                    </div>
                `;
            } else {
                // –ì—Ä–∞–¥—ñ—î–Ω—Ç
                imageHTML = `
                    <div class="placeholder-img" style="background: ${car.gradient};">
                        <span>${car.brand}</span>
                    </div>
                `;
            }
            
            // HTML –¥–ª—è —Ü—ñ–Ω–∏ –∑—ñ –∑–Ω–∏–∂–∫–æ—é
            const priceHTML = discount ? `
                <div class="price-wrapper">
                    <div class="old-price-row">
                        <span class="discount-badge">-${discountPercent}%</span>
                        <span class="old-price">üíé ${car.oldPrice.toLocaleString()}</span>
                    </div>
                    <span class="price">üíé ${car.price.toLocaleString()}</span>
                </div>
            ` : `<span class="price">üíé ${car.price.toLocaleString()}</span>`;
            
            return `
                <div class="car-card" ${car.gradient ? `data-car-gradient="${car.gradient}"` : ''}>
                    <div class="card-glare-container"></div>
                    <div class="car-image">
                        ${imageHTML}
                        ${badgeHTML}
                    </div>
                    <div class="car-info">
                        <h3>${car.model}</h3>
                        <p class="car-type">${car.category}</p>
                        <div class="car-colors">
                            <span class="colors-label">–î–æ—Å—Ç—É–ø–Ω—ñ –∫–æ–ª—å–æ—Ä–∏:</span>
                            <div class="color-palette">
                                ${car.colors.map(color => {
                                    if (color.value === 'rainbow') {
                                        return `<div class="color-circle rainbow" data-tooltip="${color.tooltip}"></div>`;
                                    } else {
                                        return `<div class="color-circle" style="background: ${color.value};" data-tooltip="${color.tooltip}"></div>`;
                                    }
                                }).join('')}
                            </div>
                        </div>
                        <div class="car-price">
                            ${priceHTML}
                            <button class="buy-btn" onclick="buyCar(${car.id})">
                                <span>–ö–£–ü–ò–¢–ò –ó–ê–†–ê–ó</span>
                                <div class="shimmer"><div></div><div></div><div></div></div>
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        // –§—É–Ω–∫—Ü—ñ—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É –∞–≤—Ç–æ–º–æ–±—ñ–ª—ñ–≤
        function renderCars(filter = '–í—Å—ñ') {
            const carGrid = document.getElementById('carGrid');
            const filteredCars = filter === '–í—Å—ñ' 
                ? carsData 
                : carsData.filter(car => car.category === filter);
            
            carGrid.innerHTML = filteredCars.map(car => createCarCard(car)).join('');
            
            // –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ –≥—Ä–∞–¥—ñ—î–Ω—Ç–∏ –¥–æ car-card
            document.querySelectorAll('.car-card[data-car-gradient]').forEach(card => {
                const gradient = card.dataset.carGradient;
                if (gradient) {
                    card.style.setProperty('--car-gradient', gradient);
                }
            });
            
            // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ —Å–ª–∞–π–¥–µ—Ä–∏
            initSliders();
            
            // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î–º–æ —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö
            initMobileScrollEffects();
            
            // –î–æ–¥–∞—î–º–æ –µ—Ñ–µ–∫—Ç shimmer –¥–æ –Ω–æ–≤–∏—Ö –∫–Ω–æ–ø–æ–∫
            attachShimmerEffect();
            
            // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î–º–æ 3D –µ—Ñ–µ–∫—Ç
            init3DTiltEffect();
        }

        // –°–ª–∞–π–¥–µ—Ä–∏ –¥–ª—è –∞–≤—Ç–æ–º–æ–±—ñ–ª—ñ–≤
        let sliderIntervals = {};

        function initSliders() {
            // –û—á–∏—â–∞—î–º–æ —Å—Ç–∞—Ä—ñ —ñ–Ω—Ç–µ—Ä–≤–∞–ª–∏
            Object.values(sliderIntervals).forEach(interval => clearInterval(interval));
            sliderIntervals = {};

            const sliders = document.querySelectorAll('.car-slider');
            sliders.forEach(slider => {
                const carId = slider.dataset.carId;
                const gradient = slider.dataset.gradient;
                
                // –ó–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ –≥—Ä–∞–¥—ñ—î–Ω—Ç —á–µ—Ä–µ–∑ inline style
                if (gradient) {
                    slider.style.setProperty('--slider-gradient', gradient);
                    const beforeElement = document.createElement('div');
                    beforeElement.className = 'slider-gradient-overlay';
                    beforeElement.style.background = gradient;
                    slider.insertBefore(beforeElement, slider.firstChild);
                }
                
                const images = slider.querySelectorAll('.slider-image');
                const dots = slider.querySelectorAll('.dot');
                
                if (images.length <= 1) return;

                let currentIndex = 0;

                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –∑–º—ñ–Ω–∞ –∫–æ–∂–Ω—ñ 4 —Å–µ–∫—É–Ω–¥–∏
                sliderIntervals[carId] = setInterval(() => {
                    currentIndex = (currentIndex + 1) % images.length;
                    updateSlider(images, dots, currentIndex);
                }, 4000);

                // –û–±—Ä–æ–±–∫–∞ –∫–ª—ñ–∫—ñ–≤ –ø–æ —Ç–æ—á–∫–∞—Ö
                dots.forEach(dot => {
                    dot.addEventListener('click', (e) => {
                        e.stopPropagation();
                        currentIndex = parseInt(dot.dataset.index);
                        updateSlider(images, dots, currentIndex);
                        
                        // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î–º–æ —Ç–∞–π–º–µ—Ä
                        clearInterval(sliderIntervals[carId]);
                        sliderIntervals[carId] = setInterval(() => {
                            currentIndex = (currentIndex + 1) % images.length;
                            updateSlider(images, dots, currentIndex);
                        }, 4000);
                    });
                });
            });
        }

        function updateSlider(images, dots, index) {
            images.forEach((img, i) => {
                img.classList.toggle('active', i === index);
            });
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
        }

        // –§—É–Ω–∫—Ü—ñ—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
        function renderFilters() {
            const filtersContainer = document.querySelector('.filters .container');
            filtersContainer.innerHTML = categories.map(category => 
                `<button class="filter-btn ${category === activeFilter ? 'active' : ''}" 
                         onclick="filterCars('${category}')">
                    <div class="wrap">
                        <p>
                            <span>‚úß</span>
                            <span>‚ú¶</span>
                            ${category}
                        </p>
                    </div>
                 </button>`
            ).join('');
        }

        // –§—É–Ω–∫—Ü—ñ—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
        function filterCars(category) {
            activeFilter = category;
            renderFilters();
            renderCars(category);
        }

        // –§—É–Ω–∫—Ü—ñ—è –ø–æ–∫—É–ø–∫–∏ (–ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ Google Form)
        function buyCar(carId) {
            const car = carsData.find(c => c.id === carId);
            
            // –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ Google –§–æ—Ä–º—É
            const formUrl = "https://docs.google.com/forms/d/e/1FAIpQLSegTN49SJCwa9PiC0MumxqmjXYM5aWyRCuTMqza6RJlhdGDRw/viewform";
            window.open(formUrl, '_blank');
        }

        // –ü–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è tooltip
        function positionTooltip(event) {
            const circle = event.target;
            const rect = circle.getBoundingClientRect();
            const centerX = rect.left + rect.width / 2;
            const topY = rect.top;
            
            circle.style.setProperty('--tooltip-x', `${centerX}px`);
            circle.style.setProperty('--tooltip-y', `${topY}px`);
        }

        function resetTooltip(event) {
            const circle = event.target;
            circle.style.removeProperty('--tooltip-x');
            circle.style.removeProperty('--tooltip-y');
        }

        // Intersection Observer –¥–ª—è –∞–Ω—ñ–º–∞—Ü—ñ—ó –ø—Ä–∏ —Å–∫—Ä–æ–ª—ñ –¢–Ü–õ–¨–ö–ò –Ω–∞ –º–æ–±—ñ–ª—å–Ω–∏—Ö
        let observer = null;
        
        function initMobileScrollEffects() {
            const isMobile = window.innerWidth <= 768;
            const carCards = document.querySelectorAll('.car-card');
            
            // –ó–∞–≤–∂–¥–∏ –æ—á–∏—â–∞—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—á, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –¥—É–±–ª—é–≤–∞–Ω–Ω—è –∞–±–æ —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è –∑–∞ –≤–∏–¥–∞–ª–µ–Ω–∏–º–∏ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏
            if (observer) {
                observer.disconnect();
                observer = null;
            }

            if (isMobile) {
                const observerOptions = {
                    threshold: 0.1, // –ó–º–µ–Ω—à–µ–Ω–∏–π –ø–æ—Ä—ñ–≥ –¥–ª—è —à–≤–∏–¥—à–æ—ó —Ä–µ–∞–∫—Ü—ñ—ó
                    rootMargin: '50px' // –ü–æ—á–∏–Ω–∞—î–º–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —Ç—Ä–æ—Ö–∏ —Ä–∞–Ω—ñ—à–µ, –Ω—ñ–∂ –µ–ª–µ–º–µ–Ω—Ç –∑'—è–≤–∏—Ç—å—Å—è
                };

                observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.classList.add('in-view');
                            // –û–ü–¢–ò–ú–Ü–ó–ê–¶–Ü–Ø: –ø–µ—Ä–µ—Å—Ç–∞—î–º–æ —Å–ø–æ—Å—Ç–µ—Ä—ñ–≥–∞—Ç–∏ –∑–∞ –µ–ª–µ–º–µ–Ω—Ç–æ–º –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –≤—ñ–Ω –∑'—è–≤–∏–≤—Å—è.
                            // –¶–µ –∑–º–µ–Ω—à—É—î –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –Ω–∞ –ø—Ä–æ—Ü–µ—Å–æ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É.
                            observer.unobserve(entry.target);
                        }
                    });
                }, observerOptions);

                carCards.forEach(card => observer.observe(card));
            } else {
                // –ù–∞ –¥–µ—Å–∫—Ç–æ–ø—ñ –ø—Ä–∏–±–∏—Ä–∞—î–º–æ –∫–ª–∞—Å –∞–Ω—ñ–º–∞—Ü—ñ—ó, —â–æ–± –Ω–µ –±—É–ª–æ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ –∑ —Ö–æ–≤–µ—Ä–æ–º
                carCards.forEach(card => card.classList.remove('in-view'));
            }
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –µ—Ñ–µ–∫—Ç—É shimmer
        function attachShimmerEffect() {
            const buttons = document.querySelectorAll(".nav-btn, .buy-btn");
            buttons.forEach((button) => {
                // –í–∏–¥–∞–ª—è—î–º–æ —Å—Ç–∞—Ä—ñ —Å–ª—É—Ö–∞—á—ñ, —â–æ–± –Ω–µ –¥—É–±–ª—é–≤–∞—Ç–∏ (—Ö–æ—á–∞ addEventListener –Ω–µ –¥—É–±–ª—é—î —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ, –∞–ª–µ –¥–ª—è –±–µ–∑–ø–µ–∫–∏)
                // –ü—Ä–æ—Å—Ç—ñ—à–µ –ø—Ä–æ—Å—Ç–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –¥–æ –Ω–æ–≤–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –∞–ª–µ —Ç—É—Ç –º–∏ –≤–∏–±–∏—Ä–∞—î–º–æ –≤—Å—ñ.
                // –ù–∞–π–∫—Ä–∞—â–µ - —Ü–µ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É–≤–∞—Ç–∏ onmousemove –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–∞–ø–æ—Ä–µ—Ü—å.
                // –ê–ª–µ –æ—Å–∫—ñ–ª—å–∫–∏ –º–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä–∏–º–æ –µ–ª–µ–º–µ–Ω—Ç–∏, —Ç–æ —Å—Ç–∞—Ä—ñ —Å–ª—É—Ö–∞—á—ñ –∑–Ω–∏–∫–∞—é—Ç—å —Ä–∞–∑–æ–º –∑ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏.
                // –¢—ñ–ª—å–∫–∏ nav-btn –∑–∞–ª–∏—à–∞—é—Ç—å—Å—è.
                
                button.onmousemove = (e) => {
                    const rect = button.getBoundingClientRect();
                    const offsetX = e.clientX - rect.left;
                    const percent = (offsetX / rect.width) * 100;
                    let mapped = percent - 50;
                    const step = 5;
                    mapped = Math.round(mapped / step) * step;
                    button.style.setProperty("--x", `${mapped}%`);
                };
                
                button.onmouseleave = () => {
                    button.style.setProperty("--x", `0%`);
                };
            });
        }

        // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è 3D –µ—Ñ–µ–∫—Ç—É –Ω–∞—Ö–∏–ª—É –∫–∞—Ä—Ç–æ–∫
        function init3DTiltEffect() {
            const cards = document.querySelectorAll('.car-card');
            
            cards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    card.style.transition = 'all 0.1s ease';
                });
                
                card.addEventListener('mousemove', (e) => {
                    const rect = card.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    
                    const centerX = rect.width / 2;
                    const centerY = rect.height / 2;
                    
                    // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π –∫—É—Ç –Ω–∞—Ö–∏–ª—É 5 –≥—Ä–∞–¥—É—Å—ñ–≤
                    const rotateX = ((y - centerY) / centerY) * -5; 
                    const rotateY = ((x - centerX) / centerX) * 5;
                    
                    // –î–æ–¥–∞—î–º–æ –ø—ñ–¥–π–æ–º (-10px) —Ç–∞ –ª–µ–≥–∫–µ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è
                    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-10px) scale3d(1.02, 1.02, 1.02)`;
                });
                
                card.addEventListener('mouseleave', () => {
                    card.style.transition = 'all 0.4s ease';
                    card.style.transform = ''; // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –¥–æ CSS —Å—Ç–∞–Ω—É
                });
            });
        }

        // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        document.addEventListener('DOMContentLoaded', () => {
            renderFilters();
            renderCars();
            initMobileScrollEffects();
            attachShimmerEffect();
            init3DTiltEffect();

            // –û–±—Ä–æ–±–∫–∞ –∫–ª—ñ–∫—ñ–≤ –ø–æ –∫–æ–ª—å–æ—Ä–∞—Ö –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤
            document.addEventListener('click', (e) => {
                // –Ø–∫—â–æ –∫–ª—ñ–∫ –ø–æ –∫—Ä—É–∂–µ—á–∫—É –∫–æ–ª—å–æ—Ä—É
                if (e.target.classList.contains('color-circle')) {
                    // –ó–∞–∫—Ä–∏–≤–∞—î–º–æ –≤—Å—ñ —ñ–Ω—à—ñ —Ç—É–ª—Ç—ñ–ø–∏
                    document.querySelectorAll('.color-circle').forEach(circle => {
                        if (circle !== e.target) {
                            circle.classList.remove('active');
                        }
                    });
                    // –¢–æ–≥–ª–∏–º –ø–æ—Ç–æ—á–Ω–∏–π
                    e.target.classList.toggle('active');
                } else {
                    // –Ø–∫—â–æ –∫–ª—ñ–∫ –ø–æ–∑–∞ –∫—Ä—É–∂–µ—á–∫–∞–º–∏ - –∑–∞–∫—Ä–∏–≤–∞—î–º–æ –≤—Å—ñ
                    document.querySelectorAll('.color-circle.active').forEach(circle => {
                        circle.classList.remove('active');
                    });
                }
            });
        });
        
        window.addEventListener('resize', initMobileScrollEffects);
    </script>
</body>
</html>
